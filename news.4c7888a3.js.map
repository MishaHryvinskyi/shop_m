{"mappings":"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","sources":["src/newsSearch/refs.js","node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js","node_modules/@swc/helpers/lib/_define_property.js","src/newsSearch/NewsApiService.js","<<jsx-config-pragma.js>>","src/newsSearch/components/LoadMoreBtn.js","src/newsSearch/mewsSearch.js","src/newsSearch/markup.js"],"sourcesContent":["export const refs = {\n    listNews: document.querySelector(\".js-list-search\"),\n    formNews: document.querySelector(\".news-form\"),\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","// const BASE_URL = \"https://newsapi.org/v2/everything\";\n// const API_KEY = \"8ece45ab03a7434e9e4dffc54874f777\";\n\n\n\n// function getNews(query) {\n//     return fetch(`${BASE_URL}?apiKey=${API_KEY}&q=${query}&pageSize=5`)\n//     .then((data) => data.json());\n// }\n\n// export { getNews };\n\nexport default class NewsApiService {\n    static ENDPOINT = \"https://newsapi.org/v2/everything\";\n    static API_KEY = \"8ece45ab03a7434e9e4dffc54874f777\";\n    constructor() {\n        this.query = '';\n        this.page = 1;\n    }\n\n    getNews() {\n        const url = `${NewsApiService.ENDPOINT}?apiKey=${NewsApiService.API_KEY}&q=${this.query}&pageSize=5&page=${this.page}`;\n        return fetch(url).then((data) => {\n            this.incrementPage()\n            return data.json();\n        });\n    }\n\n    incrementPage() {\n        this.page += 1;\n    }\n    resetPage() {\n        this.page = 1;\n    }\n}",null,"// Стани кнопки\n// 1. Коли її немає на екрані\n// 2. Неактивна(Loading...) - коли відбувається запит(відповідь ще не отримана)\n// 3. Стан активна - коли можна зробити наступний запит\n\n\nexport default class LoadMoreBtn {\n    constructor({ selector, isHidden = false, }) {\n        this.button = this.getButton(selector);\n        isHidden && this.hide();\n    }\n\n    getButton(selector) {\n        return document.querySelector(selector);\n    }\n\n    disable() {\n        this.button.disabled = true;\n        this.button.textContent = \"Loading...\";\n    }\n\n    enable() {\n        this.button.disabled = false;\n        this.button.textContent = \"Load more\";\n    }\n\n    hide() {\n        this.button.classList.add(\"hidden\")\n    }\n\n    show() {\n        this.button.classList.remove(\"hidden\")\n    }\n}","// import { getNews } from \"./NewsApiService\";\nimport { refs } from \"./refs\";\nimport { createMarkup } from \"./markup\";\nimport NewsApiService from \"./NewsApiService\";\nimport LoadMoreBtn from \"./components/LoadMoreBtn\";\n\nconst newsApiService = new NewsApiService();\nconst loadMoreBtn = new LoadMoreBtn({\n    selector: \"#loadBtn\",\n    isHidden: true,\n});\n\nrefs.formNews.addEventListener('submit', onSubmit);\nloadMoreBtn.button.addEventListener('click', fetchArticles);\n\nfunction onSubmit(event) {\n    event.preventDefault();\n    loadMoreBtn.show();\n    const form = event.currentTarget;\n    newsApiService.query = form.elements.news.value;\n\n    newsApiService.resetPage()\n    clearNewsList();\n    fetchArticles().catch(onError).finally(() => form.reset())\n}\n\nfunction fetchArticles() {\n    loadMoreBtn.disable()\n    return getArticalsMarkup().then(markup => {\n        updateNewsList(markup);\n        loadMoreBtn.enable();\n    }).catch(onError);\n}\n\nfunction getArticalsMarkup() {\n    return newsApiService.getNews()\n    .then(({ articles }) => {\n        if(articles.length === 0) throw new Error(\"No data!\");\n\n        return articles.reduce(\n        (markup, articles) => markup + createMarkup(articles), \"\");\n    })\n}\n\nfunction onError(err) {\n    console.error(err);\n    loadMoreBtn.hide();\n    clearNewsList();\n    updateNewsList('<img src=\"https://img.freepik.com/premium-vector/error-404-found-glitch-effect_8024-4.jpg\" alt=\"404\">')\n}\n\nfunction updateNewsList(markup) {\n    refs.listNews.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearNewsList() {\n    refs.listNews.innerHTML = \"\";\n}","function createMarkup({ \n    author, \n    title, \n    description, \n    url, \n    urlToImage \n}) {\n    return  `\n    <li class=\"js-item-search\">\n        <h2>${title}</h2>\n        <h3>${author || \"No author!😕\"}</h3>\n        <img \n            src=\"${urlToImage || \"https://ornament.name/pic/no_result.jpg\"}\"\n            alt=\"${title}\" \n            width=\"550\" \n        />\n        <p>${description}</p>\n        <a class=\"btn-s\" href=\"${url}\" target=\"_blank\" rel=\"noreferrer noopener\">Read more...</a>\n    </li>\n`;\n};\n\nexport { createMarkup };"],"names":["$f226fb79ffb3cdbb$export$21666b427502ea6d","listNews","document","querySelector","formNews","Object","defineProperty","$665014edacbfe17b$exports","value","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","prototype","$cec85eba0a352189$exports","obj","$f7c4449fc2e72af8$export$2e2bcd8739ae039","NewsApiService","this","query","page","url","concat","ENDPOINT","API_KEY","fetch","then","data","_this","incrementPage","json","$parcel$interopDefault","$257ed1d4804996cd$export$2e2bcd8739ae039","LoadMoreBtn","param","selector","_isHidden","isHidden","button","getButton","hide","disabled","textContent","classList","add","remove","$077fde3571282f11$var$newsApiService","$077fde3571282f11$var$loadMoreBtn","$077fde3571282f11$var$fetchArticles","disable","getNews","articles1","articles","Error","reduce","markup","author","title","description","urlToImage","$077fde3571282f11$var$updateNewsList","enable","catch","$077fde3571282f11$var$onError","err","console","error","$077fde3571282f11$var$clearNewsList","insertAdjacentHTML","innerHTML","addEventListener","event","preventDefault","show","form","currentTarget","elements","news","resetPage","finally","reset"],"version":3,"file":"news.4c7888a3.js.map"}